package äºŒåˆ†æ³•;

/**
 * 540. æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ 
 * ç»™ä½ ä¸€ä¸ªä»…ç”±æ•´æ•°ç»„æˆçš„æœ‰åºæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¼šå‡ºç°ä¸¤æ¬¡ï¼Œå”¯æœ‰ä¸€ä¸ªæ•°åªä¼šå‡ºç°ä¸€æ¬¡ã€‚
 * <p>
 * è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›åªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªæ•°ã€‚
 * <p>
 * ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³ O(log n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦ã€‚
 * <p>
 * <p>
 * <p>
 * ç¤ºä¾‹ 1:
 * <p>
 * è¾“å…¥: nums = [1,1,2,3,3,4,4,8,8]
 * è¾“å‡º: 2
 * ç¤ºä¾‹ 2:
 * <p>
 * è¾“å…¥: nums =  [3,3,7,7,10,11,11]
 * è¾“å‡º: 10
 * <p>
 * <p>
 * æç¤º:
 * <p>
 * 1 <= nums.length <= 105
 * 0 <= nums[i] <= 105
 * <p>
 * ğŸ”¥è§£é¢˜æ ¸å¿ƒï¼šç›¸ç­‰çš„ä¸€ä¾§æ˜¯å¶æ•°é•¿åº¦è¿˜æ˜¯å¥‡æ•°é•¿åº¦ã€‚å¶æ•°ä¸åœ¨è¿™ä¾§åœ¨å¦ä¸€ä¾§ï¼›å¥‡æ•°åœ¨è¿™ä¾§ğŸ”¥
 *
 * @author zhaochong on 2022/9/17 08:44
 */
public class MediumSingleNonDuplicate {

	public static void main(String[] args) {
		System.out.println(singleNonDuplicate(new int[]{1, 1, 2, 2, 3}));
	}

	public static int singleNonDuplicate(int[] nums) {

		if (nums.length == 1) {
			return nums[0];
		}

		int l = 0;
		int r = nums.length - 1;

		while (l <= r) {

			if (l == r) {
				return nums[l];
			}

			int mid = (l + r) / 2;

			// å¦‚æœ=å·¦è¾¹ï¼Œçœ‹å·¦è¾¹æ˜¯ä¸æ˜¯å¶æ•°é•¿åº¦ï¼Œå¦‚æœæ˜¯å¶æ•°é•¿åº¦ï¼Œå°±è¯´æ˜å†å¦ä¸€è¾¹ï¼Œå¦‚æœæ˜¯å¥‡æ•°é•¿åº¦ï¼Œè¯´æ˜åœ¨è¿™ä¸€è¾¹
			if (nums[mid] == nums[mid - 1]) {
				// å¥‡æ•°ä¸ª
				if ((l + mid) % 2 == 0) {
					r = mid - 2;
				} else {
					l = mid + 1;
				}
			}

			// å¦‚æœ=å³è¾¹ï¼Œçœ‹å³è¾¹æ˜¯ä¸æ˜¯å¶æ•°é•¿åº¦ï¼Œå¦‚æœæ˜¯å¶æ•°é•¿åº¦ï¼Œå°±è¯´æ˜å†å¦ä¸€è¾¹ï¼Œå¦‚æœæ˜¯å¥‡æ•°é•¿åº¦ï¼Œè¯´æ˜åœ¨è¿™ä¸€è¾¹
			else if (nums[mid] == nums[mid + 1]) {
				// å¥‡æ•°ä¸ª
				if ((r + mid) % 2 == 0) {
					l = mid + 2;
				} else {
					r = mid - 1;
				}
			} else {
				return nums[mid];
			}
		}

		throw new RuntimeException("ä¸å¯èƒ½èµ°åˆ°è¿™é‡Œ");
	}
}
